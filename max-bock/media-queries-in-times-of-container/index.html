<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Media Queries in Times of @container</title>
	<link rel="stylesheet" href="/css/style.css" />
</head>
<body>
	
		<nav class="background-primary">
			<a href="/">Steph&#39;s Favorite RSS</a>
			<small><em>Fetching results since Feb 25, 2021</em></small>
		</nav>
	

	<header >
			
		<div class="container container--item">
				<small><strong>Jun 11, 2021</strong></small>

				<h1>Media Queries in Times of @container</h1>
				<p class="header-meta">

<span class="category"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" focusable="false" aria-hidden="true" width="24"><defs/><path d="M0 0h24v24H0V0z" fill="none"/><path d="M17 3H7c-1.1 0-2 .9-2 2v16l7-3 7 3V5c0-1.1-.9-2-2-2z"/></svg> <a href="/category/css/">CSS</a></span>

 <a href="/max-bock/">All from Max Böck</a> <strong><a href="https://mxb.dev/blog/media-queries-in-times-of-container-queries/">View <span class="inclusively-hidden">Media Queries in Times of @container</span> on mxb.dev</a></strong></p>
			
		</div>
	</header>
	<main>
	<article class="container item-article background-light">
<p class="lead">With container queries now on the horizon - will we need media queries at all? Is there a future where we build responsive interfaces completely without them?</p>
<p>Ethan, who coined the term <a href="https://alistapart.com/article/responsive-web-design/">responsive web design</a> over a decade ago, has recently said that media-query-less layouts are certainly within bounds:</p>
<blockquote>
<p>Can we consider a flexible layout to be “responsive” if it <strong>doesn’t</strong> use any media queries, but <strong>only</strong> uses container queries? [...] I’d be inclined to answer: yes, absolutely.</p>
<footer>Ethan Marcotte - <cite><a href="https://ethanmarcotte.com/wrote/responsive-design-at-11-container-queries/">Responsive design and container queries? Oh my!</a></cite></footer>
</blockquote>
<p>Over at CSS-Tricks, Chris had similar thoughts. He issued a challenge to examine how and where media queries are used today, and if they will still be necessary going forward:</p>
<blockquote>
<p>A common refrain, from me included, has been that if we had container queries we’d use them for the vast majority of what we use media queries for today. The challenge is: look through your CSS codebase now with fresh eyes knowing how the @container queries currently work. Does that refrain hold up?</p>
<footer>Chris Coyier - <cite><a href="https://css-tricks.com/a-cornucopia-of-container-queries/">A Cornucopia of Container Queries</a></cite></footer>
</blockquote>
<p>Fair enough.<br>
I took the bait and had a look at some of my projects - and yes, most of what I use <code>@media</code> for today can probably be accomplished by <code>@container</code> at some point. Nevertheless, I came up with a few scenarios where I think media queries will still be necessary.</p>
<hr>
<h2 id="h-for-page-layout"><a class="heading-anchor" href="#h-for-page-layout" aria-hidden="true">#</a> For page layout</h2>
<p>While container queries can theoretically be used to control any element, they really shine when applied to reusable, independent components. The canonical example is a card component: a self-contained piece of UI you can put anywhere.</p>
<p>Page layouts, on the other hand, are better suited for media queries in my opinion. Page layouts are usually at the very top level of the DOM, not nested in another container. I’ve never encountered a case where the main page layout had to adapt to any other context than the viewport.</p>
<pre class="language-css"><code class="language-css"><span class="token selector">.layout</span> <span class="token punctuation">{</span><br>    <span class="token property">display</span><span class="token punctuation">:</span> grid<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><span class="token atrule"><span class="token rule">@media</span> <span class="token punctuation">(</span><span class="token property">min-width</span><span class="token punctuation">:</span> 60em<span class="token punctuation">)</span></span> <span class="token punctuation">{</span><br>    <span class="token selector">.layout</span> <span class="token punctuation">{</span><br>        <span class="token property">grid-template-rows</span><span class="token punctuation">:</span> 4rem 1fr auto<span class="token punctuation">;</span><br>        <span class="token property">grid-template-columns</span><span class="token punctuation">:</span> 25% 1fr<span class="token punctuation">;</span><br>        <span class="token property">grid-template-areas</span><span class="token punctuation">:</span> <br>            <span class="token string">"header header"</span><br>            <span class="token string">"sidebar main"</span><br>            <span class="token string">"footer footer"</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
<h2 id="h-for-global-tokens"><a class="heading-anchor" href="#h-for-global-tokens" aria-hidden="true">#</a> For global tokens</h2>
<p>Another good usecase for media queries is to set global design tokens, like spacing or font-sizes. With CSS custom properties it’s now much easier to have fine-grain control over global styles for different devices.</p>
<p>For example, you might want to have bigger text and more whitespace on a large TV than you want for a mobile screen. A larger screen means the user’s head will be physically farther away.</p>
<p>It only makes sense to use a media query there - since the reason for the change is the size of the device itself, not the width of any specific element.</p>
<pre class="language-css"><code class="language-css"><span class="token selector">:root</span> <span class="token punctuation">{</span><br>    <span class="token comment">/* Font Sizes */</span><br>    <span class="token property">--font-size-headline-l</span><span class="token punctuation">:</span> 1.875rem<span class="token punctuation">;</span> <br>    <span class="token property">--font-size-headline-m</span><span class="token punctuation">:</span> 1.75rem<span class="token punctuation">;</span> <br>    <span class="token property">--font-size-headline-s</span><span class="token punctuation">:</span> 1.5rem<span class="token punctuation">;</span><br>    <span class="token property">--font-size-copy-l</span><span class="token punctuation">:</span> 1.125rem<span class="token punctuation">;</span><br>    <span class="token property">--font-size-copy-s</span><span class="token punctuation">:</span> 0.875rem<span class="token punctuation">;</span><br><br>    <span class="token comment">/* Global Spacing */</span><br>    <span class="token property">--spacing-x</span><span class="token punctuation">:</span> 1rem<span class="token punctuation">;</span><br>    <span class="token property">--spacing-y</span><span class="token punctuation">:</span> 1rem<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><span class="token atrule"><span class="token rule">@media</span> <span class="token punctuation">(</span><span class="token property">min-width</span><span class="token punctuation">:</span> 48em<span class="token punctuation">)</span></span> <span class="token punctuation">{</span><br>    <span class="token selector">:root</span> <span class="token punctuation">{</span><br>        <span class="token property">--font-size-headline-l</span><span class="token punctuation">:</span> 2.5rem<span class="token punctuation">;</span><br>        <span class="token property">--font-size-headline-m</span><span class="token punctuation">:</span> 2rem<span class="token punctuation">;</span><br>        <span class="token property">--font-size-headline-s</span><span class="token punctuation">:</span> 1.75rem<span class="token punctuation">;</span><br>        <span class="token property">--font-size-copy-l</span><span class="token punctuation">:</span> 1.25rem<span class="token punctuation">;</span><br>        <span class="token property">--font-size-copy-s</span><span class="token punctuation">:</span> 1rem<span class="token punctuation">;</span><br><br>        <span class="token property">--spacing-x</span><span class="token punctuation">:</span> 2rem<span class="token punctuation">;</span><br>        <span class="token property">--spacing-y</span><span class="token punctuation">:</span> 2rem<span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br></code></pre>
<h2 id="h-for-user-preference-and-actual-%E2%80%9Cmedia%E2%80%9D-queries"><a class="heading-anchor" href="#h-for-user-preference-and-actual-%E2%80%9Cmedia%E2%80%9D-queries" aria-hidden="true">#</a> For user preference and actual “media” queries</h2>
<p>Screen dimensions are not the only things we can detect with media queries. The <a href="https://www.w3.org/TR/mediaqueries-4/">Media Queries Level 4 Spec</a> (with Level 5 currently a working draft) lists many different queries related to user preference, like:</p>
<ul>
<li><code>prefers-reduced-motion</code></li>
<li><code>prefers-contrast</code></li>
<li><code>prefers-reduced-transparency</code></li>
<li><code>prefers-color-scheme</code></li>
<li><code>inverted-colors</code></li>
<li>and others</li>
</ul>
<p>We can use these to better tailor an experience to the current <a href="https://css-tricks.com/a-complete-guide-to-css-media-queries/#accessibility">user’s specific needs</a>.</p>
<p>Other media queries allow for micro-optimizations based on a device’s input method (i.e. touch or mouse):</p>
<pre class="language-css"><code class="language-css"><span class="token comment">/* fine pointers (mouse) can hit smaller checkboxes */</span><br><span class="token atrule"><span class="token rule">@media</span> <span class="token punctuation">(</span><span class="token property">pointer</span><span class="token punctuation">:</span> fine<span class="token punctuation">)</span></span> <span class="token punctuation">{</span><br>  <span class="token selector">input[type="checkbox"]</span> <span class="token punctuation">{</span><br>    <span class="token property">width</span><span class="token punctuation">:</span> 1rem<span class="token punctuation">;</span><br>    <span class="token property">height</span><span class="token punctuation">:</span> 1rem<span class="token punctuation">;</span><br>    <span class="token property">border-width</span><span class="token punctuation">:</span> 1px<span class="token punctuation">;</span><br>    <span class="token property">border-color</span><span class="token punctuation">:</span> blue<span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br><span class="token comment">/* coarse pointers (touch) need larger hit areas */</span><br><span class="token atrule"><span class="token rule">@media</span> <span class="token punctuation">(</span><span class="token property">pointer</span><span class="token punctuation">:</span> coarse<span class="token punctuation">)</span></span> <span class="token punctuation">{</span><br>  <span class="token selector">input[type="checkbox"]</span> <span class="token punctuation">{</span><br>    <span class="token property">width</span><span class="token punctuation">:</span> 2rem<span class="token punctuation">;</span><br>    <span class="token property">height</span><span class="token punctuation">:</span> 2rem<span class="token punctuation">;</span><br>    <span class="token property">border-width</span><span class="token punctuation">:</span> 2px<span class="token punctuation">;</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
<p>Finally, there are actual “media type” queries like <code>@media print</code> that won’t go anywhere. And there are experimental ideas being discussed for new media queries, like this one for “foldable” devices:</p>
<img src="https://res.cloudinary.com/mxb/image/upload/q_auto,w_1200/v1623356414/galaxy-z-fold_ufx13u.jpg" alt="Samsung Galaxy Fold Z" width="656" height="369">
<pre class="language-css"><code class="language-css"><span class="token selector">:root</span> <span class="token punctuation">{</span><br>    <span class="token property">--sidebar-width</span><span class="token punctuation">:</span> 5rem<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><span class="token comment">/* if there's a single, vertical fold in the device's screen, <br>   expand the sidebar width to cover the entire left side. */</span><br><span class="token atrule"><span class="token rule">@media</span> <span class="token punctuation">(</span><span class="token property">spanning</span><span class="token punctuation">:</span> single-fold-vertical<span class="token punctuation">)</span></span> <span class="token punctuation">{</span><br>    <span class="token selector">:root</span> <span class="token punctuation">{</span><br>        <span class="token property">--sidebar-width</span><span class="token punctuation">:</span> <span class="token function">env</span><span class="token punctuation">(</span>fold-left<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><span class="token selector">main</span> <span class="token punctuation">{</span><br>    <span class="token property">display</span><span class="token punctuation">:</span> grid<span class="token punctuation">;</span><br>    <span class="token property">grid-template-columns</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--sidebar-width<span class="token punctuation">)</span> 1fr<span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<video width="656" height="447" autoplay="" controls="" loop="" muted="" playsinline="">
    <source src="https://storage.googleapis.com/web-dev-uploads/video/HodOHWjMnbNw56hvNASHWSgZyAf2/Uf3RL7EhVZGK2ECiD0sT.mp4" type="video/mp4">
</video>
<div class="callout callout--info"><span class="callout__icon"><svg class="icon icon--info" role="img" aria-hidden="true" width="24" height="24"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/assets/icons/icons.sprite.svg#icon-info"></use></svg></span><div class="callout__content"><p>BTW: You can read more about this in <a href="https://web.dev/new-responsive/">&quot;The new responsive: Web design in a component-driven world&quot;</a> by Una Kravets.</p></div></div>
<h2 id="h-for-fixed-to-window-stuff"><a class="heading-anchor" href="#h-for-fixed-to-window-stuff" aria-hidden="true">#</a> For fixed-to-window stuff</h2>
<p>Components that are taken out of the normal document flow don’t have to care about their containers. Some UI elements are fixed to the viewport itself, usually oriented along an edge of the screen.</p>
<video width="656" height="377" autoplay="" controls="" loop="" muted="" playsinline="">
    <source src="https://res.cloudinary.com/mxb/video/upload/q_auto/v1623343827/message-tab_bexyja.mp4" type="video/mp4">
</video>
<p>Have a look at Twitter’s “Messages” tab at the bottom of the screen for example. Its relevant container <em>is</em> the window, so it makes sense to use a media query here and only apply <code>position: fixed</code> at some breakpoint.</p>
<h2 id="h-for-heights"><a class="heading-anchor" href="#h-for-heights" aria-hidden="true">#</a> For heights</h2>
<p>The current implementation of <code>@container</code> <s>only allows querying the width of an element (its “inline” axis), not its height.</s></p>
<p>👉 <strong>Update:</strong> <a href="https://twitter.com/TerribleMia/status/1403383013593866245">Miriam tells me</a> that it <em>is</em> possible to query the height of containers, provided they are defined as <code>size</code> rather than <code>inline-size</code>. The exact value name of this is still in flux at the time of writing.</p>
<p>Style adjustments in relation to width are probably the primary use case for most UI elements anyway, but there are still cases where screen height is an issue. Here’s an example from a “hero image” component:</p>
<pre class="language-css"><code class="language-css"><span class="token selector">.hero</span> <span class="token punctuation">{</span><br>    <span class="token property">display</span><span class="token punctuation">:</span>flex<span class="token punctuation">;</span><br>    <span class="token property">flex-direction</span><span class="token punctuation">:</span> column<span class="token punctuation">;</span><br>    <span class="token property">height</span><span class="token punctuation">:</span> 100vh<span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><span class="token comment">/* if the screen is really tall, don't fill all of it */</span><br><span class="token atrule"><span class="token rule">@media</span> <span class="token punctuation">(</span><span class="token property">min-height</span><span class="token punctuation">:</span> 60em<span class="token punctuation">)</span></span> <span class="token punctuation">{</span><br>    <span class="token selector">.hero</span> <span class="token punctuation">{</span><br>        <span class="token property">height</span><span class="token punctuation">:</span> 75vh<span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
<hr>
<h2 id="h-mix-container-queries-and-media-queries"><a class="heading-anchor" href="#h-mix-container-queries-and-media-queries" aria-hidden="true">#</a> Mix Container Queries and Media Queries</h2>
<p>While I think container queries will eventually replace most “low level” responsive logic, there are still a lot of good usecases for trusty media queries.</p>
<p>A combination of both techniques will probably be the best way forward. <code>@media</code> can handle the big picture stuff, user preferences and global styles; <code>@container</code> will take care of all the micro-adjustments in the components themselves.</p>
<p>A perfect team!</p>
<aside class="signup js-signup-widget" data-nosnippet=""><div class="signup__front"><h2 class="signup__title">By the way...</h2><div class="signup__desc">I'm running an email list for people interested in front-end development and the future of CSS. If you enjoy that kind of stuff, you can join here and I'll notify you when I publish a new post. No strings attached, unsubscribe anytime!</div><div class="signup__form"><form action="https://dev.us18.list-manage.com/subscribe/post" method="POST" class="form form--signup"><div class="form__body"><input type="hidden" name="u" value="64781452976687d0f4f2ea370"> <input type="hidden" name="id" value="772b9208b5"> <input type="hidden" name="SOURCE" value="/blog/media-queries-in-times-of-container-queries/"><div class="form__fields"><p class="form__field"><label for="mce-FNAME" class="form__label">First Name (optional)</label> <input type="text" class="form__input" value="" name="FNAME" id="mce-FNAME" placeholder="Sam"></p><p class="form__field"><label for="mce-EMAIL" class="form__label">Email Address</label> <input type="email" class="form__input" value="" name="EMAIL" id="mce-EMAIL" placeholder="sam@website.com" required=""></p></div><div class="sr-only" aria-hidden="true"><input type="text" name="b_64781452976687d0f4f2ea370_772b9208b5" tabindex="-1" value=""></div></div><div class="form__actions"><button type="submit" class="btn btn--primary" name="subscribe">Subscribe</button><div class="form__feedback js-signup-widget-feedback" hidden=""></div><div class="spinner"><div class="spinner__layercontainer"><div class="spinner__layer spinner__layer--1"><div class="spinner__circle-clipper spinner__left"><div class="spinner__circle"></div></div><div class="spinner__gap-patch"><div class="spinner__circle"></div></div><div class="spinner__circle-clipper spinner__right"><div class="spinner__circle"></div></div></div><div class="spinner__layer spinner__layer--2"><div class="spinner__circle-clipper spinner__left"><div class="spinner__circle"></div></div><div class="spinner__gap-patch"><div class="spinner__circle"></div></div><div class="spinner__circle-clipper spinner__right"><div class="spinner__circle"></div></div></div><div class="spinner__layer spinner__layer--3"><div class="spinner__circle-clipper spinner__left"><div class="spinner__circle"></div></div><div class="spinner__gap-patch"><div class="spinner__circle"></div></div><div class="spinner__circle-clipper spinner__right"><div class="spinner__circle"></div></div></div><div class="spinner__layer spinner__layer--4"><div class="spinner__circle-clipper spinner__left"><div class="spinner__circle"></div></div><div class="spinner__gap-patch"><div class="spinner__circle"></div></div><div class="spinner__circle-clipper spinner__right"><div class="spinner__circle"></div></div></div></div></div></div></form></div></div><div class="signup__back js-signup-backside"></div><div class="signup__icon"><svg class="icon icon--check" role="img" aria-hidden="true" width="24" height="24"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="/assets/icons/icons.sprite.svg#icon-check"></use></svg></div></aside>
</article>
	</main>
	<footer class="background-primary">
		<p><a href="https://github.com/5t3ph/eleventy-rss-reader">eleventy-rss-reader</a> created by <a href="https://twitter.com/5t3ph">Stephanie Eckles</a></p>
	</footer>

	
	<script async src="https://cpwebassets.codepen.io/assets/embed/ei.js"></script>
	
</body>
</html>